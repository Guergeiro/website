#!/bin/bash

(

  # Clean that shit up
  rm -rf staging/public/*

  # Make all necessary directories so the terminal doesn't get mad
  mkdir -p staging/public/assets
  mkdir    staging/public/assets/css
  mkdir    staging/public/assets/img
  mkdir    staging/public/assets/js
  mkdir    staging/public/assets/vendor

  # Copy what was built for prod; use that for staging
  cp    index.html staging/index.html
  cp    public/assets/css/style-docs.css     staging/public/assets/css/style-docs.css
  cp    public/assets/css/style-docs.css.map staging/public/assets/css/style-docs.css.map
  cp    public/assets/js/bundle.staging.js   staging/public/assets/js/bundle.staging.js
  cp    public/assets/js/app_data.staging.js staging/public/assets/js/app_data.staging.js
  cp -r public/assets/img                    staging/public/assets/
  cp -r public/assets/vendor                 staging/public/assets/

  # Discard changes made to prod
  git checkout -- index.html
  git checkout -- public/*
)
